#include <iostream>
#include <math.h>
#include <algorithm>
#include <vector>
#include <unordered_set>
#include <unordered_map>
using namespace std;

static bool compareMinWDH(vector<int>& box1, vector<int>& box2)
{
    return box1[0] > box2[0];
}

int maxHeight(vector<pair<int, vector<int>>>& box, vector<int>& topBox, int start) {
    int totalHeight = 0, maxTotalHeight = 0;

    for(int i = start; i < box.size(); ++i) {
        if(topBox[0] > box[i].second[0] && topBox[1] > box[i].second[1] && topBox[2] > box[i].second[2]) {
            int tempHeight = maxHeight(box, box[i].second, i);
            totalHeight = box[i].second[2] + tempHeight;
            box[i].first = tempHeight;
            maxTotalHeight = max(totalHeight, maxTotalHeight);
        }
    }

    return maxTotalHeight;
}

int pileBox(vector<vector<int>>& box) {
    if(box.size() == 0) return 0;
    int maxTotalHeight = 0, totalHeight = 0;
    sort(box.begin(), box.end(), compareMinWDH);

    vector<pair<int, vector<int>>> boxWithMaxHeight(box.size());
    for(int i = 0; i < box.size(); ++i) {
        boxWithMaxHeight[i].first = box[i][2];
        boxWithMaxHeight[i].second = box[i];
    }

    for(int i = 0; i < box.size(); i++) {
        maxTotalHeight = max(box[i][2], maxTotalHeight);
        if(boxWithMaxHeight[i].first != box[i][2]) totalHeight = boxWithMaxHeight[i].first;
        else totalHeight = box[i][2] + maxHeight(boxWithMaxHeight, box[i], i);
        maxTotalHeight = max(totalHeight, maxTotalHeight);
    }

    return maxTotalHeight;
}

int main() {
    vector<vector<int>> boxs = {{20, 14, 9}, {18, 3, 13}, {16, 20, 9}, {16, 6, 17}, {8, 3, 18}, {19, 6, 1}, {20, 13, 19}, {9, 8, 11}, {8, 5, 15}, {6, 16, 10}, {1, 15, 16}, {5, 7, 12}, {15, 16, 7}, {2, 15, 3}, {16, 16, 19}, {1, 13, 10}, {18, 15, 8}, {8, 19, 7}, {10, 9, 7}, {4, 16, 4}, {5, 10, 7}, {15, 9, 9}, {9, 8, 20}, {10, 7, 4}, {10, 16, 2}, {12, 19, 10}, {2, 2, 14}, {19, 6, 4}, {16, 17, 10}, {13, 9, 12}, {19, 12, 4}, {3, 15, 13}, {6, 13, 16}, {8, 18, 9}, {8, 8, 12}, {5, 13, 5}, {9, 2, 12}, {12, 1, 7}, {4, 3, 14}, {15, 13, 9}, {5, 8, 19}, {4, 12, 19}, {12, 9, 17}, {14, 10, 9}, {2, 10, 5}, {18, 4, 11}, {20, 18, 6}, {12, 18, 3}, {18, 3, 9}, {9, 1, 7}, {11, 3, 8}, {3, 15, 12}, {20, 14, 4}, {17, 9, 19}, {3, 6, 9}, {18, 4, 2}, {2, 9, 13}, {19, 2, 20}, {15, 20, 2}, {12, 13, 13}, {2, 7, 18}, {7, 6, 4}, {13, 5, 20}, {12, 6, 14}, {17, 9, 18}, {3, 19, 1}, {6, 12, 10}, {1, 20, 11}, {18, 3, 3}, {18, 12, 16}, {11, 17, 1}, {10, 18, 13}, {8, 7, 3}, {3, 20, 17}, {15, 15, 14}, {8, 7, 9}, {1, 5, 4}, {6, 16, 3}, {20, 17, 13}, {3, 7, 1}, {19, 10, 14}, {8, 19, 3}, {16, 14, 16}, {16, 12, 7}, {4, 9, 11}, {8, 20, 12}, {15, 12, 18}, {19, 8, 14}, {9, 20, 14}, {17, 12, 11}, {4, 17, 6}, {6, 2, 11}, {18, 5, 5}, {11, 14, 9}, {1, 12, 7}, {5, 6, 15}, {7, 9, 7}, {13, 8, 18}, {12, 9, 20}, {9, 19, 6}, {12, 19, 20}, {13, 10, 6}, {16, 12, 15}, {4, 1, 8}, {15, 3, 12}, {1, 13, 11}, {10, 17, 3}, {12, 1, 15}, {20, 2, 4}, {8, 11, 10}, {17, 10, 6}, {7, 1, 13}, {4, 18, 20}, {8, 7, 8}, {7, 5, 13}, {9, 5, 17}, {8, 8, 2}, {16, 17, 5}, {16, 5, 5}, {5, 3, 16}, {3, 14, 16}, {1, 4, 4}, {5, 2, 14}, {13, 20, 5}, {9, 2, 12}, {19, 15, 6}, {12, 10, 11}, {19, 6, 17}, {4, 19, 13}, {9, 14, 18}, {14, 2, 7}, {7, 4, 13}, {5, 14, 11}, {2, 3, 3}, {13, 3, 17}, {1, 11, 17}, {7, 7, 14}, {9, 20, 13}, {6, 19, 1}, {14, 1, 11}, {12, 3, 12}, {18, 12, 10}, {6, 4, 7}, {6, 2, 19}, {14, 18, 15}, {17, 4, 12}, {11, 11, 1}, {14, 10, 4}, {15, 14, 16}, {14, 14, 16}, {12, 3, 13}, {11, 11, 11}, {12, 8, 20}, {14, 17, 16}, {13, 15, 19}, {13, 2, 19}, {3, 7, 10}, {2, 2, 5}, {19, 14, 3}, {19, 12, 12}, {10, 8, 20}, {5, 18, 1}, {16, 1, 12}, {16, 16, 18}, {15, 4, 15}, {16, 8, 19}, {6, 15, 5}, {16, 7, 7}, {14, 7, 20}, {12, 4, 15}, {14, 2, 13}, {19, 11, 3}, {10, 7, 13}, {4, 14, 13}, {11, 11, 15}, {20, 1, 16}, {5, 11, 9}, {7, 19, 9}, {15, 19, 12}, {4, 18, 13}, {11, 4, 18}, {7, 8, 20}, {1, 2, 2}, {7, 16, 14}, {7, 5, 4}, {15, 2, 11}, {10, 18, 8}, {6, 13, 20}, {5, 10, 15}, {4, 3, 20}, {15, 16, 9}, {19, 12, 8}, {6, 12, 2}, {2, 4, 12}, {1, 10, 5}, {11, 8, 9}, {4, 5, 14}, {17, 20, 11}, {15, 20, 9}, {2, 7, 6}, {14, 1, 4}, {5, 7, 13}, {6, 8, 19}, {13, 1, 18}, {3, 17, 18}, {19, 13, 6}, {13, 19, 10}, {11, 2, 13}, {11, 13, 9}, {9, 11, 3}, {14, 6, 10}, {3, 7, 2}, {3, 2, 18}, {8, 5, 10}, {8, 9, 11}, {16, 8, 19}, {9, 2, 19}, {9, 20, 5}, {4, 12, 11}, {20, 15, 4}, {5, 17, 13}, {14, 13, 20}, {5, 14, 3}, {10, 1, 7}, {8, 3, 19}, {12, 6, 20}, {17, 5, 14}, {17, 1, 19}, {11, 16, 4}, {19, 15, 9}, {18, 9, 12}, {11, 13, 14}, {20, 16, 3}, {11, 12, 16}, {12, 17, 8}, {20, 15, 9}, {14, 18, 2}, {9, 5, 16}, {3, 11, 9}, {10, 12, 2}, {16, 7, 12}, {5, 8, 20}, {7, 20, 2}, {13, 12, 12}, {18, 7, 6}, {20, 4, 4}, {1, 7, 18}, {9, 9, 7}, {5, 13, 4}, {16, 5, 14}, {14, 6, 14}, {16, 9, 6}, {20, 16, 4}, {1, 17, 6}, {10, 9, 8}, {9, 20, 1}, {3, 14, 17}, {20, 3, 9}, {19, 7, 18}, {6, 2, 17}, {20, 15, 10}, {5, 13, 10}, {5, 10, 8}, {2, 12, 16}, {4, 5, 8}, {13, 16, 20}, {12, 15, 3}, {10, 14, 17}, {18, 11, 5}, {12, 8, 9}, {15, 19, 11}, {19, 6, 3}, {19, 18, 1}, {9, 11, 4}, {7, 1, 14}, {20, 8, 2}, {6, 19, 17}, {12, 20, 14}, {19, 2, 9}, {14, 12, 7}, {10, 5, 4}, {14, 8, 2}, {11, 9, 16}, {9, 13, 18}, {6, 8, 4}, {10, 14, 19}, {4, 7, 10}, {18, 7, 5}, {9, 18, 15}, {2, 3, 2}, {17, 1, 9}, {13, 5, 6}, {3, 7, 20}, {12, 20, 11}, {19, 6, 19}, {9, 16, 19}, {17, 2, 6}, {19, 15, 11}, {7, 8, 11}, {10, 16, 10}, {3, 20, 16}, {4, 17, 14}, {17, 10, 19}, {19, 10, 8}, {10, 19, 17}, {18, 7, 2}, {4, 14, 16}, {10, 19, 3}, {19, 12, 4}, {11, 16, 4}, {5, 12, 2}, {7, 19, 9}, {8, 5, 2}, {7, 9, 3}, {3, 2, 3}, {16, 13, 11}, {16, 12, 19}, {10, 6, 18}, {11, 16, 17}, {7, 13, 13}, {12, 8, 16}, {16, 8, 3}, {20, 11, 19}, {17, 1, 20}, {6, 7, 15}, {9, 10, 4}, {15, 19, 16}, {9, 14, 11}, {1, 1, 6}, {12, 14, 2}, {11, 10, 4}, {12, 20, 12}, {14, 15, 3}, {11, 19, 13}, {15, 16, 14}, {3, 17, 14}, {13, 2, 20}, {2, 14, 4}, {19, 17, 3}, {7, 8, 6}, {16, 14, 11}, {15, 10, 8}, {2, 14, 16}, {2, 4, 4}, {4, 17, 2}, {15, 15, 2}, {12, 10, 11}, {16, 19, 14}, {18, 14, 7}, {4, 20, 20}, {6, 4, 18}, {8, 11, 7}, {14, 5, 19}, {7, 15, 10}, {9, 4, 9}, {8, 12, 1}, {4, 13, 11}, {17, 1, 16}, {7, 2, 6}, {15, 7, 2}, {8, 15, 14}, {12, 13, 1}, {3, 18, 18}, {3, 8, 14}, {18, 1, 17}, {1, 17, 7}, {8, 1, 10}, {12, 2, 7}, {8, 14, 18}, {6, 3, 4}, {6, 5, 8}, {5, 3, 3}, {3, 9, 20}, {2, 16, 13}, {2, 6, 15}, {3, 11, 7}, {2, 2, 11}, {19, 6, 14}, {20, 12, 13}, {11, 7, 3}, {19, 17, 20}, {19, 13, 16}, {15, 5, 13}, {19, 19, 11}, {1, 18, 4}, {1, 7, 15}, {16, 7, 4}, {16, 9, 12}, {4, 20, 15}, {14, 12, 19}, {1, 1, 11}, {11, 4, 20}, {16, 15, 2}, {20, 9, 14}, {16, 8, 5}, {14, 17, 3}, {6, 2, 14}, {1, 2, 3}, {9, 4, 18}, {19, 9, 1}, {4, 15, 12}, {10, 19, 7}, {20, 19, 6}, {4, 7, 12}, {14, 8, 8}, {16, 12, 4}, {2, 18, 10}, {18, 10, 15}, {8, 19, 13}, {14, 10, 11}, {14, 18, 7}, {19, 14, 10}, {7, 16, 17}, {16, 2, 19}, {17, 12, 13}, {14, 5, 5}, {1, 9, 9}, {11, 6, 7}, {18, 10, 12}, {10, 14, 5}, {12, 13, 15}, {15, 9, 12}, {14, 11, 10}, {16, 12, 18}, {11, 4, 2}, {10, 11, 14}, {12, 11, 6}, {5, 19, 10}, {7, 19, 8}, {8, 16, 5}, {14, 19, 16}, {3, 2, 1}, {5, 10, 3}, {10, 8, 17}, {6, 17, 5}, {15, 20, 18}, {20, 18, 2}, {12, 16, 7}, {19, 9, 6}, {11, 12, 13}, {7, 18, 1}, {8, 4, 10}, {11, 7, 10}, {2, 9, 20}, {5, 19, 7}, {3, 12, 16}, {11, 10, 9}, {11, 14, 18}, {13, 3, 10}, {15, 10, 11}, {8, 9, 1}, {18, 1, 19}, {5, 5, 18}, {11, 9, 11}, {18, 5, 17}, {5, 20, 9}, {10, 2, 11}, {12, 12, 3}, {1, 14, 19}, {16, 14, 19}, {17, 4, 19}, {9, 2, 2}, {3, 7, 15}, {2, 3, 16}, {13, 1, 5}, {2, 13, 8}, {11, 5, 11}, {5, 9, 14}, {12, 19, 20}, {4, 14, 5}, {14, 11, 1}, {4, 14, 18}, {4, 16, 15}, {9, 7, 7}, {20, 5, 7}, {19, 16, 16}, {6, 12, 20}, {11, 4, 4}, {13, 7, 13}, {3, 12, 4}};
    int height = pileBox(boxs);
    cout << height << endl;
    return height;
}